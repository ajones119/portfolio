---
import BlogLayout from '../../layouts/BlogLayout.astro';
import TableOfContents from './TableOfContents.astro';

interface Props {
	title: string;
	description?: string;
	sections: Array<{
		id: string;
		title: string;
		subsections?: Array<{
			id: string;
			title: string;
		}>;
	}>;
}

const { title, description, sections } = Astro.props;
---

<BlogLayout title={title} description={description}>
	<article class="min-h-screen py-12">
		<div class="container mx-auto px-4 max-w-7xl">
			<div class="grid grid-cols-1 lg:grid-cols-[1fr_16rem] gap-12">
				<!-- Main Content -->
				<div class="blog-content w-full min-w-0">
					<header class="mb-12">
						<h1 class="text-4xl lg:text-5xl font-bold font-abril-fatface mb-4">{title}</h1>
						{description && (
							<p class="text-lg text-muted font-playfair-display italic">{description}</p>
						)}
					</header>
					
					<div class="prose prose-lg max-w-none w-full min-w-0 overflow-x-hidden">
						<slot />
					</div>
				</div>
				
				<!-- Table of Contents -->
				<aside>
					<TableOfContents sections={sections} />
				</aside>
			</div>
		</div>
	</article>
</BlogLayout>

<style>
	/* Custom prose styling to match Three Caballeros aesthetic */
	:global(.blog-content .prose) {
		color: var(--color-primary);
		font-family: var(--font-lato);
	}
	
	:global(.blog-content .prose h1) {
		font-family: var(--font-abril-fatface);
		color: var(--color-primary);
	}
	
	:global(.blog-content .prose h2) {
		font-family: var(--font-abril-fatface);
		color: var(--color-secondary);
		margin-top: 3rem;
		margin-bottom: 1.5rem;
		scroll-margin-top: 6rem;
	}
	
	:global(.blog-content .prose h3) {
		font-family: var(--font-playfair-display);
		color: var(--color-tertiary);
		font-weight: 600;
		margin-top: 2rem;
		margin-bottom: 1rem;
		scroll-margin-top: 6rem;
	}
	
	:global(.blog-content .prose h4) {
		font-family: var(--font-playfair-display);
		color: var(--color-primary);
	}
	
	:global(.blog-content .prose p) {
		margin-bottom: 1.5rem;
		line-height: 1.8;
	}
	
	:global(.blog-content .prose a) {
		color: var(--color-secondary);
		text-decoration-color: var(--color-quaternary);
		transition: color 0.2s;
	}
	
	:global(.blog-content .prose a:hover) {
		color: var(--color-tertiary);
	}
	
	:global(.blog-content .prose strong) {
		color: var(--color-primary);
		font-weight: 700;
	}
	
	:global(.blog-content .prose em) {
		color: var(--color-muted);
		font-style: italic;
	}
	
	:global(.blog-content .prose blockquote) {
		border-left-color: var(--color-quaternary);
		color: var(--color-muted);
		font-style: italic;
	}
	
	:global(.blog-content .prose ul),
	:global(.blog-content .prose ol) {
		margin-bottom: 1.5rem;
	}
	
	:global(.blog-content .prose li) {
		margin-bottom: 0.75rem;
	}
	
	:global(.blog-content .prose code) {
		background-color: transparent;
		padding: 0;
		font-size: 0.9em;
	}
	
	:global(.blog-content .prose pre) {
		background-color: transparent;
	}
	
	/* Ensure sections have proper scroll margin for TOC highlighting */
	:global(.blog-content .prose section[id^="section-"],
	.blog-content .prose div[id^="subsection-"]) {
		scroll-margin-top: 6rem;
	}
</style>

