---
import Weather from './cards/Weather/Weather.astro';
import CenterImage from './cards/CenterImage/CenterImage.astro';
import Contact from './cards/Contact/Contact.astro';
import Experience from './cards/Experience/Experience.astro';
import HeaderCard from './cards/HeaderCard/HeaderCard.astro';
import DnDInitiativeTracker from './cards/DnDInitiativeTracker/DnDInitiativeTracker.astro';
import MinesweeperDemo from './cards/MinesweeperDemo/MinesweeperDemo.astro';
import AppraiseCSVParser from './cards/AppraiseCSVParser/AppraiseCSVParser.astro';
import RPGSoundboard from './cards/RPGSoundboard/RPGSoundboard.astro';
import GoblinScribe from './cards/GoblinScribe/GoblinScribe.astro';
import BlankCard from './cards/BlankCard/BlankCard.astro';
import { lordOfTheRingsQuotes } from './quotes';

---

<section id="about-me" class="relative m-0 p-0 min-h-screen lg:h-[200vh] lg:flex lg:items-center">
    <div class="container mx-auto lg:px-4 py-8 w-full h-full">
        <div class="flex flex-col lg:grid lg:gap-4 lg:grid-cols-6 lg:grid-rows-16 h-full w-full">
            <!-- Header Card -->
            <div class="grid-item-1 w-full h-full lg:border border-secondary lg:col-span-4 lg:row-span-3 card-bg-secondary">
                <HeaderCard />
            </div>

            <!-- Experience Timeline -->
            <div class="grid-item-2 w-full h-full lg:border border-tertiary lg:col-span-2 lg:row-span-4 card-bg-tertiary">
                <Experience />
            </div>

            <!-- Weather Widget -->
            <div class="grid-item-3 w-full h-full lg:border border-quaternary lg:col-span-1 lg:row-span-3 card-bg-quaternary">
                <Weather />
            </div>

            <!-- Quip/Philosophy -->
            <div id="quote-card" class="grid-item-4 w-full h-full lg:border border-quinary lg:col-span-1 lg:row-span-3 p-6 flex flex-col justify-center card-bg-quinary">
                <p id="quote-text" class="text-sm font-playfair-display italic text-muted leading-relaxed mb-2">
                    
                </p>
                <p id="quote-author" class="text-xs text-muted font-playfair-display">
                    
                </p>
            </div>

            <!-- Center Image -->
            <div class="grid-item-5 w-full h-full lg:border border-senary lg:col-span-2 card-bg-senary">
                <CenterImage />
            </div>

            <!-- Contact Info -->
            <div class="grid-item-6 w-full h-auto md:h-full lg:border border-tertiary lg:row-span-2 lg:col-span-4 card-bg-tertiary">
                <Contact />
            </div>

            <!-- Nav Cards -->
            <a href="#projects" class="grid-item-7 w-full h-full lg:border border-primary lg:col-span-2 lg:col-start-1 lg:row-start-7 lg:row-end-8 p-6 flex items-center justify-center card-bg-primary hover:opacity-80 transition-opacity cursor-pointer projects-link">
                <p class="text-lg font-bold font-abril-fatface">Projects</p>
            </a>
            <a href="/resume" data-astro-prefetch class="grid-item-8 w-full h-full lg:border border-secondary lg:col-span-2 lg:col-start-3 lg:row-start-7 lg:row-end-8 p-6 flex items-center justify-center card-bg-secondary hover:opacity-80 transition-opacity cursor-pointer">
                <p class="text-lg font-bold font-abril-fatface">Resume</p>
            </a>
            <a href="/blog" data-astro-prefetch class="grid-item-9 w-full h-full lg:border border-tertiary lg:col-span-2 lg:col-start-5 lg:row-start-7 lg:row-end-8 p-6 flex items-center justify-center card-bg-tertiary hover:opacity-80 transition-opacity cursor-pointer">
                <p class="text-lg font-bold font-abril-fatface">Dev Blog</p>
            </a>
            <div id="projects" class="grid-item-10 w-full h-auto md:h-full lg:border border-quaternary lg:col-span-4 lg:col-start-1 lg:row-start-8 lg:row-end-10 card-bg-quaternary">
                <DnDInitiativeTracker />
            </div>
            <div class="grid-item-11 w-full h-auto md:h-full lg:border border-quinary lg:col-span-2 lg:col-start-5 lg:row-start-8 lg:row-end-10 card-bg-quinary">
                <MinesweeperDemo />
            </div>
            <div class="grid-item-12 w-full h-full lg:border border-senary lg:col-span-2 lg:col-start-0 lg:row-start-10 lg:row-end-12 card-bg-senary">
                <AppraiseCSVParser />
            </div>
            <div class="grid-item-13 w-full h-auto md:h-full lg:border border-primary lg:col-span-4 lg:col-start-3 lg:row-start-10 lg:row-end-12 card-bg-primary">
                <RPGSoundboard />
            </div>
            <div class="grid-item-14 w-full h-full lg:border border-secondary lg:col-span-3 lg:col-start-1 lg:row-start-12 lg:row-end-14 card-bg-secondary order-15 lg:order-14">
                <BlankCard />
            </div>
            <div class="grid-item-15 w-full h-full lg:border border-tertiary lg:col-span-3 lg:col-start-4 lg:row-start-12 lg:row-end-14 card-bg-tertiary order-14 lg:order-15">
                <GoblinScribe />
            </div>
           
        </div>
    </div>
</section>
<style>
    /* Card background colors - light mode with border color at 20%, dark mode transparent */
    .card-bg-primary { background-color: rgba(0, 0, 0, 0.2); }
    .card-bg-secondary { background-color: rgba(51, 102, 102, 0.2); }
    .card-bg-tertiary { background-color: rgba(255, 153, 102, 0.2); }
    .card-bg-quaternary { background-color: rgba(153, 204, 153, 0.2); }
    .card-bg-quinary { background-color: rgba(153, 102, 153, 0.2); }
    .card-bg-senary { background-color: rgba(255, 204, 153, 0.2); }

    /* Dark mode - all card backgrounds transparent */
    html[data-theme="dark"] .card-bg-primary,
    html[data-theme="dark"] .card-bg-secondary,
    html[data-theme="dark"] .card-bg-tertiary,
    html[data-theme="dark"] .card-bg-quaternary,
    html[data-theme="dark"] .card-bg-quinary,
    html[data-theme="dark"] .card-bg-senary {
        background-color: transparent !important;
    }
</style>

<script define:vars={{ quotes: lordOfTheRingsQuotes }}>
    function getRandomQuote() {
        const randomIndex = Math.floor(Math.random() * quotes.length);
        return quotes[randomIndex];
    }
    
    function displayRandomQuote() {
        const quote = getRandomQuote();
        const quoteText = document.getElementById('quote-text');
        const quoteAuthor = document.getElementById('quote-author');
        
        if (quoteText && quoteAuthor) {
            quoteText.textContent = `"${quote.text}"`;
            quoteAuthor.textContent = `â€” ${quote.author}`;
        }
    }
    
    // Display quote when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', displayRandomQuote);
    } else {
        displayRandomQuote();
    }
    
    // Handle Projects link scroll
    const projectsLink = document.querySelector('.projects-link');
    if (projectsLink) {
        projectsLink.addEventListener('click', (e) => {
            e.preventDefault();
            const projectsSection = document.getElementById('projects');
            if (projectsSection) {
                projectsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    }
</script>
